<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./images/iconfont/iconfont.css">
</head>

<body>
    <div class="head-inner">
        <div class="top">
            <div class="top-left">广州市</div>
            <div class="top-right"><img src="./images/angle[1].png" alt=""></div>
        </div>
        <ul class="worp">
            <li class="hhh"><a href="#">请登录</a></li>
            <li class="hhh"><a href="#">注册</a></li>
            <li class="hhh"><a href="#"><img src="./images/header_sign-hash-0459d02c.gif" alt=""> 签到有礼</a></li>
            <li class="hhh"><a href="#">我的订单</a></li>
            <li class="hhh"><a href="#">我的特卖<img src="./images/angle[1].png" alt=""></a></li>
            <li class="hhh"><a href="#">会员俱乐部<img src="./images/angle[1].png" alt=""></a></li>
            <li class="hhh"><a href="#">客户服务 <img src="./images/angle[1].png" alt=""></a></li>
            <li class="hhh"><a href="#"><span class="iconfont icon-mobile1"></span> 手机版</a></li>
            <li class="hhh"><a href="#">更多 <img src="./images/angle[1].png" alt=""></a></li>
        </ul><a href=""></a>
    </div>
    <div class="head-logo">
        <div class="logo_1"><img src="./images/1597888875741.png" alt=""></div>
        <div class="logo_2"><img src="./images/1587017895494.jpg" alt=""></div>
        <div class="hu">
            <div class="hu_cn"><input type="text">
                <p class="icon"><a href=""><span class="iconfont icon-sousuo_huaban"></span></a></p>
            </div>
            <ul class="list">
                <li><a href="">护扶套餐</a></li>
                <li><span>|</span><a href="">COACH</a></li>
                <li><span>|</span><a href="">连衣裙</a></li>
                <li><span>|</span><a href="">女休闲鞋</a></li>
                <li><span>|</span><a href="">耐克NiKe</a></li>
            </ul>

        </div>
        <div class="tool">
            <div class="tool-cn"><a href=""><span class="iconfont icon-gouwudai-
                "></span></a></div>
            <p class="tool-nb">购物袋</p>
            <div class="tool-cm">0</div>
        </div>
    </div>
    <div class="main-nav">
        <ul>
            <li class="mian-cn"><span class="iconfont icon-daohanglankaihe"></span> 商品分类</li>
            <li><a href="">首页</a></li>
            <li><a href=""><img src="./images/1594023637101.gif" alt="">季末特卖</a></li>
            <li><a href="">最后疯抢</a></li>
            <li><a href="">唯品快抢</a></li>
            <li><a href="">品牌清仓</a></li>
            <li><a href="">女装</a></li>
            <li><a href="">母婴</a></li>
            <li><a href="">家电</a></li>
            <li><a href="">国际</a></li>
            <li><a href="">美妆</a></li>
            <li><a href="">鞋包</a></li>
            <li><a href="">更多&nbsp;v</a></li>
        </ul>
    </div>
    <div class="focus-banner">
        <div id="banner" class="banner">
        </div>
        
        
    
    </div>
    <div class="operation-inner">
            <div class="inner-cn">
                <img src="./images/15979915170947.jpg.webp" alt="">
            </div>
            <p class="iner-cm">
                <img src="./images/1.webp" alt="">
                <img src="./images/2.webp" alt="">
                <img src="./images/3.webp" alt="">
            </p>
    </div>
    <div class="footer">
        <ul class="foot-vip">
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
            <li class="vip2"></li>
        </ul>
        <div class="foot-list">
            <dl class="yhu">
                <dt>服务保障</dt>
                <dd>
                    <a href="">·正品保证</a>
                </dd>
                <dd>
                    <a href="">·7天无理由放心退</a>
                </dd>
                <dd>
                    <a href="">·7x15小时客户服务</a>
                </dd>
                <dd>
                    <a href="">·7天无理由随心换</a>
                </dd>
            </dl>
            <dl class="yhu">
                <dt>购物指南</dt>
                <dd>
                    <a href="">·导购演示</a>
                </dd>
                <dd>
                    <a href="">·订单操作</a>
                </dd>
                <dd>
                    <a href="">·会员注册</a>
                </dd>
                <dd>
                    <a href="">·账户管理</a>
                </dd>
                <dd>
                    <a href="">·收货样品</a>
                </dd>
                <dd>
                    <a href="">·会员等级</a>
                </dd>
            </dl>
            <dl class="yhu">
                <dt>支付方式</dt>
                <dd>
                    <a href="">·23家主流网银支付</a>
                </dd>
                <dd>
                    <a href="">·支付宝、银联等支付</a>
                </dd>
                <dd>
                    <a href="">·信用卡支付</a>
                </dd>
                <dd>
                    <a href="">·零钱支付</a>
                </dd>
                
            </dl>
            <dl class="yhu">
                <dt>配送方式</dt>
                <dd>
                    <a href="">·配送范围及运费</a>
                </dd>
                <dd>
                    <a href="">·验货与签收</a>
                </dd>
                
                
            </dl>
            <dl class="yhu">
                <dt>售后服务</dt>
                <dd>
                    <a href="">·退货政策</a>
                </dd>
                <dd>
                    <a href="">·退货流程</a>
                </dd>
                <dd>
                    <a href="">·退款方式和时效</a>
                </dd>
                <dd>
                    <a href="">·换货服务</a>
                </dd>
                
            </dl>
            <dl class="tc-last">
                <dt>唯品会APP二维码</dt>
                <dd>
                    <img src="./images/1466134037230.jpg" width="100" height="100" alt="">
                </dd>
                <dd>
                    下载唯品会移动APP
                </dd>
               
                
            </dl>


        </div>
    </div>
    <div class="footer-infor">
        <div class="infor-cn">
            <p class="infor-tet">
                <a href="">关于我们</a>|
                <a href="">About us</a>|
                <a href="">Investor Relations</a>|
                <a href="">媒体报道</a>|
                <a href="">品牌招商</a>|
                <a href="">隐私条款</a>|
                <a href="">唯品诚聘</a>|
                <a href="">唯品卡</a>|
                <a href="">联系我们</a>
            </p>
        </div>
        <div class="infor-cm">
            <p class="infor-eds">
                Copyright © 2008-2020 vip.com，All Rights Reserved  使用本网站即表示接受<a href="">唯品会用户协议</a>。版权所有<a href="">广州唯品会电子商务有限公司</a><br>粤公网安备 440103021111111号 &nbsp;&nbsp;粤ICP备08114786号 增值业务经营许可证：粤B2-20170777 网络文化经营许可证：粤网文〔2018〕5030-1743号<br>经营主体证照&nbsp;&nbsp;风险监测信息&nbsp;&nbsp;互联网药品信息服务资格证书：（粤）-经营性-2018-0271  网络食品交易第三方平台备案凭证：粤B2-20170777 医疗器械网络交易服务第三方平台备案凭证：（粤）网械平台备字[2019]第00001号
            </p>
        </div>
    </div>


    <script src="animate.js"></script>
    <script>
        "use strict";
        /* 
            在书写面向对象的代码时 
            1 先把类定义
            2 考虑这个类应当有的属性
                考虑哪些属性是应当传递进来的哪些属性是可以不用传递的
            3 考虑这个类应当有的方法
         */
        // 如果决定要使用 animate 必须做一个检测  检测animate函数是否存在 
        if (!window.animate) {
            // 只要window.animate为undefined  说明不存在 就会走这里
            throw new Error("Banner需要依赖animate")
        }
        // 定义类
        function Banner(dom, imgArr, duration=1000) {
            // 1 由外部传递的容器元素
            this.dom = dom;
            // 2 由外部传递的图片数组
            this.imgArr = imgArr;
            // 3 按钮组元素
            this.btns = document.createElement("div");
            // 4 图片列表容器元素
            this.imgUL = document.createElement("ul");
            // 5 小圆点列表容器元素
            this.cirUL = document.createElement("ul");
            // 6 左按钮
            this.leftBtn = document.createElement("div");
            // 7 右按钮
            this.rightBtn = document.createElement("div");
            // 8 小圆点列表元素数组
            this.cirsArr = [];
            this.lisArr = [];
            this.imgEleArr = [];
            // 9 信号量
            this.idx = 0;
            // 10 锁
            this.lock = true;
            // 11 宽度属性
            this.width = dom.clientWidth;
            // 12 高度属性
            this.height = dom.clientHeight;
            // 13 定时器属性
            this.timer = null;
            // 14 动画时长
            this.duration = duration;
            this.init();
        }
        Banner.prototype.init = function () {
            this.upTree();
            this.create();
            this.render();
            this.change();
            this.bindEvent();
            this.autoLoop();
        }
        // 方法
        // 创建元素 
        Banner.prototype.create = function () {
            // 创建图片列表
            this.createImgList();
            // 创建小圆点列表
            this.createCirsList();
        }
        // 创建图片列表
        Banner.prototype.createImgList = function () {
            // 图片列表要根据数组进行创建
            for (var i = 0; i < this.imgArr.length; i++) {
                // 创建li
                var li = document.createElement("li");
                // 创建img
                var img = new Image(); // 等价于 document.createElement("img");
                // 设置src
                img.src = this.imgArr[i];
                // 将img元素装入imgEleArr中
                this.imgEleArr.push(img);
                // 追加img到li中
                li.appendChild(img);
                this.lisArr.push(li);
                // 追加li到ul中
                this.imgUL.appendChild(li);
            }
            // 复制猫腻图 
            var fake = this.imgUL.firstElementChild.cloneNode(true);
            this.imgEleArr.push(fake.firstElementChild)
            this.lisArr.push(fake);
            // 追加到ul中
            this.imgUL.appendChild(fake);
        }
        // 创建小圆点列表
        Banner.prototype.createCirsList = function () {
            // 创建小圆点列表 也是根据图片数量来创建的
            for (var i = 0; i < this.imgArr.length; i++) {
                var li = document.createElement("li");
                this.cirUL.appendChild(li);
                this.cirsArr.push(li);
            }
        }

        // 调整按钮样式
        Banner.prototype.renderBtn = function () {
            // 1 按钮容器的样式
            var obj = {
                position: 'absolute',
                top: "35%",
                height: "30%",
                width: "100%",
                // background: "red"
            }
            for (var i in obj) {
                this.btns.style[i] = obj[i]
            }
            // 2 左按钮的样式
            // 3 右按钮的样式
            var obj1 = {
                width: "10%",
                height: "100%",
                fontSize: this.height * .15 + "px",
                lineHeight: this.height * .3 + "px",
                textAlign: 'center',
                color: 'white',
                cursor: "pointer"
            }
            for (var i in obj1) {
                this.leftBtn.style[i] = obj1[i];
                this.rightBtn.style[i] = obj1[i];
            }
            this.leftBtn.style.float = "left";
            this.rightBtn.style.float = "right";
            this.leftBtn.innerHTML = "&lt;";
            this.rightBtn.innerHTML = "&gt;";
        }
        // 按钮组合
        Banner.prototype.appendBtn = function () {
            this.btns.appendChild(this.leftBtn);
            this.btns.appendChild(this.rightBtn);
        }

        // 调整小圆点的样式
        Banner.prototype.renderCirs = function () {
            // 1 容器样式
            var obj = {
                position: "absolute",
                bottom: "5%",
                left: '25%',
                right: '25%',
                display: 'flex',
                justifyContent: "space-between",
                alignItems: "center",
                listStyle: "none"
            }
            for (var i in obj) {
                this.cirUL.style[i] = obj[i];
            }
            // 2 小圆点本身样式
            var obj1 = {
                width: this.height * .07 + "px",
                height: this.height * .07 + "px",
                borderRadius: "50%",
                backgroundColor: "red",
                cursor: "pointer"
            }
            this.cirsArr.forEach(function (value) {
                for (var i in obj1) {
                    value.style[i] = obj1[i];
                }
            });

        }
        // 添加样式
        Banner.prototype.render = function () {
            // 图片列表样式
            this.renderImg();
            // 按钮样式
            this.renderBtn();
            // 小圆点样式
            this.renderCirs();
            // 更新容器的样式
            this.renderContainer();

        }
        // 渲染容器
        Banner.prototype.renderContainer = function () {
            this.dom.style.position = "relative";
            this.dom.style.overflow = "hidden";
        }
        // 渲染图片列表
        Banner.prototype.renderImg = function () {
            var _this = this;
            this.lisArr.forEach(function (value) {
                value.style.float = "left";
                value.style.width = _this.width + "px";
                value.style.height = _this.height + "px";
            });

            this.imgEleArr.forEach(function (value) {
                value.style.width = _this.width + "px";
                value.style.height = _this.height + "px";
            });

            var obj = {
                position: "absolute",
                top: "0",
                left: "0",
                width: (this.imgArr.length + 1) * this.width + "px",
                height: this.height + "px"
            }
            for (var i in obj) {
                this.imgUL.style[i] = obj[i];
            }

        }
        // 组合
        Banner.prototype.upTree = function () {
            // 1 图片列表
            this.dom.appendChild(this.imgUL);
            // 2 按钮列表
            this.dom.appendChild(this.btns);
            // 3 小圆点列表
            this.dom.appendChild(this.cirUL);
            // 4 按钮追加子按钮
            this.appendBtn();
        }

        // 初始状态的设置
        Banner.prototype.change = function () {
            // 小圆点有初始状态
            // 所有的小圆点都取消样式
            for (var i = 0; i < this.cirsArr.length; i++) {
                this.cirsArr[i].style.backgroundColor = "red";
            }
            // 跟当前的idx对应的小圆点应当显示不同的样式
            this.cirsArr[this.idx].style.backgroundColor = "orange";
        }


        // 绑定事件
        Banner.prototype.bindEvent = function () {
            // 左按钮绑定事件
            this.bindLeft();
            // 右按钮绑定事件
            this.bindRight();
            // 小圆点绑定事件
            this.bindCirs();
            // 容器绑定事件
            // this.bindContainer();
            this.bindEnter();
            this.bindLeave();
        }

        // 左按钮绑定事件
        Banner.prototype.bindLeft = function () {
            this.leftBtn.onclick = () => {
                console.log("点击到左按钮了")
                // 检测锁的状态
                if (!this.lock) {
                    return;
                }
                // 关锁
                this.lock = false;
                // 信号量改变
                this.idx--;
                // 检测是否到了第一张图的前面(越界了)
                if (this.idx < 0) {
                    this.imgUL.style.left = -this.imgArr.length * this.width + "px";
                    this.idx = this.imgArr.length;
                    this.idx--;
                }
                // 开始动画
                animate(this.imgUL, { left: -this.idx * this.width }, this.duration, () => {
                    // 开锁
                    this.lock = true;
                    this.change();
                });
            }
        }
        // 右按钮绑定事件
        Banner.prototype.bindRight = function () {
            this.rightBtn.onclick = () => {
                console.log("点击到右按钮了")
                // 检测锁的状态
                if (!this.lock) {
                    return;
                }
                // 关锁
                this.lock = false;
                // 信号量改变
                this.idx++;
                // 开始动画
                animate(this.imgUL, { left: -this.idx * this.width }, this.duration, () => {
                    // 检测是否到了最后一张图
                    if (this.idx >= this.imgArr.length) {
                        this.imgUL.style.left = 0;
                        this.idx = 0;
                    }
                    // 开锁
                    this.lock = true;
                    this.change();
                })
            }
        }
        // 小圆点绑定事件
        Banner.prototype.bindCirs = function () {
            this.cirsArr.forEach((value, index) => {
                value.onclick = () => {
                    console.log("我是第" + index + "个小圆点")
                    // 判定锁
                    if (!this.lock) {
                        return;
                    }
                    // 关锁
                    this.lock = false;
                    // 改变信号量
                    this.idx = index;
                    // 动画
                    animate(this.imgUL, { left: -this.idx * this.width }, this.duration, () => {
                        this.lock = true;
                        this.change();
                    });

                }
            });
        }
        // 容器绑定事件
        // Banner.prototype.bindContainer = function () {

        //     this.dom.onmouseenter = function () {
        //         console.log("鼠标进入了")
        //     }
        //     this.dom.onmouseleave = function () {
        //         console.log('鼠标离开了')
        //     }
        // }


        // 自动轮播方法
        Banner.prototype.autoLoop = function () {
            this.timer = setInterval(() => {
                this.rightBtn.onclick();
            }, this.duration + 3000);
        }

        // 鼠标进入
        Banner.prototype.bindEnter = function () {
            this.dom.onmouseenter = () => {
                clearInterval(this.timer)
            }
        }
        // 鼠标离开
        Banner.prototype.bindLeave = function () {
            this.dom.onmouseleave = () => {
                this.autoLoop();
            }
        }

        // 获取元素
        var ele = document.getElementById("banner");
        var b = new Banner(ele, ["./img/1.jpg", "img/2.jpg", "img/3.jpg" ]);
       
    </script>
</body>

</html>